<!DOCTYPE html>
<html>
    <head>
        <title>Игрулечка</title>
        <meta charset="utf-8">
        <script src="mapMethods.js"></script>
        <script src="activity.js"></script>
        <script src="objects.js"></script>
    </head>
    <body>
        <script src="test.js"></script>
        <canvas id="mycanvas" width="800px" height="600px">

        </canvas>
        <script>
document.body.addEventListener("keydown", this.initMove);
            var canvas = document.getElementById('mycanvas');
            var ctx = canvas.getContext('2d');
            var mapManager = {
                mapData: null,
                nextRow:0,
                tLayer: null,
                xCount: 0,
                yCount: 0,
                tSize: {x: 40, y: 40},
                mapSize: {x: 40, y: 40},
                tilesets: new Array(),
                imgLoadCount: 0,
                imgLoaded: false,
                jsonLoaded: false,
                view: {x: 0, y: 0, w: 800, h: 600},
                parseMap: parseMap,
                draw: draw,
                getTile: getTile,
                isVisible: isVisible,
                getTileset: getTileset,
                parseEntities: parseEntities,
                getTilesetIDX:getTilesetIDX
            };

            var gameManager = {
                entities: [],
                player: null,
                init: init,
                initPlayer: initPlayer,
                drawAll: drawAll
            }
            
            loadMap();
            
            gameManager.drawAll();
        </script>
    </body>

</html>
